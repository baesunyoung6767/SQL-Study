## 논리적인 SQL 개념 용어

### 서브쿼리 위치에 따른 SQL 용어
---
> 서브쿼리란 쿼리 안의 보조쿼리를 가리키는 용어이다.<br>
가장 바깥쪽의 SELECT 문인 메인쿼리를 기준으로 내부에 SELECT 문을 추가로 작성해서 서브쿼리를 만든다. <br>

이처럼 SELECT 문 안쪽에 위치한 SELECT 문은 어느 위치에 작성되었는지에 따라 부르는 용어가 달라진다.
<br>
작성하는 위치는 크게 ```SELECT 절, FROM 절, WHERE 절```로 나뉜다. 

<br>

```
SELECT (SELECT ... FROM ...) ①
FROM (SELECT ... FROM ...) ②
WHERE 컬럼명 IN (SELECT ... FROM ...) ③
```
- ①은 주로 메인 쿼리의 SELECT 절 내부에 하나의 숫자나 문자, 기호 등을 출력하는 SELECT 문으로 ```스칼라 서브쿼리```라고 한다.
- ②는 메인쿼리의 FROM 절 내부에 작성한 SELECT 문으로 ```인라인 뷰```라고 한다.
- ③은 메인쿼리의 WHERE 절 내부에 작성한 SELECT 문으로 ```중첩 서브쿼리```라고 부른다.

<br>

**스칼라 서브 쿼리** <br>
메인 쿼리의 SELECT 절에는 최종 출력하려는 열들이 나열되므로, <u>출력 데이터 1건과 스칼라 서브쿼리의 결과 건수가 일치</u>해야 한다. <br>

<br>

**인라인 뷰** <br>
FROM 절 내부에서 일시적으로 뷰를 생성하는 방식이므로 인라인 뷰라고 부른다. <br>
인라인 뷰의 결과는 내부적으로 <u>메모리 또는 디스크에 임시 테이블을 생성</u>하여 활용한다. <br>

<br>

**중첩 서브쿼리** <br>
WHERE 절에서 단순한 값을 비교 연산하는 대신 서브쿼리를 추가하여 비교 연산하기 위해 중첩 서브쿼리를 사용한다. <br>
중첩 서브쿼리와 비교할 때는 보툥 비교 연산자(=, <, > ... )를 비롯해 IN, EXISTS, NOT IN, NOT EXISTS 문을 많이 사용한다. <br>

<br>

### 메인쿼리와 관계성에 따른 SQL 용어
---
**비상관 서브쿼리** <br>
메인쿼리와 서브쿼리 간에 <u>관계성이 없음</u>을 의미한다. <br>
서브쿼리가 독자적으로 실행된 뒤 메인쿼리에게 그 결과를 던져주는 형태이다. <br><br>

✅ 서브쿼리가 먼저 실행된 뒤에 그 결과를 메인쿼리가 활용한다. <br>
즉, ```서브 쿼리 → 메인 쿼리``` 순서로 실행된다.

<br><br>

**상관 서브쿼리** <br>
메인쿼리와 서브쿼리 간에 <u>관계성이 있음</u>을 의미한다. <br>
서브쿼리가 수행되려면 메인쿼리의 값을 받아야 하므로 서브쿼리와 메인쿼리는 서로 끈끈한 관계를 유지한다. <br>
→ SELECT 절에 작성하는 **스칼라 서브쿼리**와 WHERE 절에 작성하는 **중첩 서브쿼리**일 때 발생한다. <br>

```
SELECT ...
FROM 학생
WHERE ... IN (SELECT ...
            FROM 지도 교수
            WHERE 학생.학번 = ...)
```
1. 메인쿼리에서 학생 테이블의 학번 결과를 서브쿼리로 전달
2. 지도교수 테이블의 학번과 비교(지도교수.학번 = 학생.학번)
3. 지도교수테이블의 학번과 학생 테이블의 학번이 동일할 때만 서브쿼리의 결과로서 도출
4. 도출된 서브쿼리의 학번 결과를 메인쿼리의 학번과 비교해 최종 결과를 출력

<br>

### 반환 결과에 따른 SQL 용어
---
**단일행 서브쿼리** <br>
서브쿼리 결과가 1건의 행으로 반환되는 쿼리이다. <br>
그에 따라 메인쿼리의 조건절에서는 ```=, <, >``` 등의 연산자와 비교한다. <br><br>

**다중행 서브쿼리**<br>
서브쿼리 결과가 여러 건의 행으로 반환되는 쿼리이다. <br>
그에 따라 메인쿼리의 조건절에서는 ```IN``` 구문으로 서브쿼리에서 반환되는 값들을 받는다. <br><br>

**다중열 서브쿼리** <br>
서브쿼리 결과가 여러 개의 열과 행으로 반환된다. <br>
그에 따라 메인쿼리의 조건절에서는 IN 구문과 함께 서브쿼리에서 반환될 열들을 동일하게 나열해 서브쿼리 결과를 받는다. <br>
```
SELECT ...
FROM ...
WHERE (이름, 전공코드) IN (SELECT 이름, 전공코드
                            FROM 학생
                            WHERE 이름 LIKE '김%')
```

<br><br>

### 조인 연산방식 용어
---
